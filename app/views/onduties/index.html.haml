%div{ :style => "width: 800px;" }
	#map{ :style => "width: 800px; height: 400px;" }

%h3 #{flash[:notice]}

%table#Onduties
	%thead
		%tr
			%th DriverName
			%th PlateNumber
			%th StudentName
			%th StudentId
			%th VehicleLat
			%th VehicleLng
			%th Startlat
			%th Startlng
			%th Endlat
			%th Endlng
			%th isFinished

	%tbody
		- @onduties.each do |onduty|
			%tr
				%td= onduty.driverName
				%td= onduty.plateNumber
				%td= onduty.studentName
				%td= onduty.studentId
				%td= onduty.vehicleLat
				%td= onduty.vehicleLng
				%td= onduty.startLat
				%td= onduty.startLng
				%td= onduty.endLat
				%td= onduty.endLng
				%td= onduty.isFinished

= link_to 'View Admins', users_index_path
= link_to 'View Vehicles', vehicles_path
= link_to 'View Drivers', drivers_path
= link_to 'View Requests', requests_path

%script{ :src => "//maps.google.com/maps/api/js?key=AIzaSyCLRQ5YdbKITiUMTRPq1oAhPNR2Oup-d7c" }
%script{ :src => "//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js" }
%script{ :src => "//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js" }
%script{ :src => "//underscorejs.org/underscore-min.js" }

:javascript
	handler = Gmaps.build('Google');
	handler.buildMap({
		provider: {},
		internal: { id: 'map' }
	}, () => {
		markers = handler.addMarkers([
			{
				"lat": 30.619703,
				"lng": -96.334977,
				"picture": {
					"width":  180,
					"height": 32
				},
				"infowindow": "A&M"
			}
		]);
		handler.bounds.extendWith(markers);
		handler.fitMapToBounds();
		handler.getMap().setZoom(16);
	});
